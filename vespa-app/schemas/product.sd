schema product {
// This defines the document type for storing products
document product {
// Basic product information
field id type string {
indexing: attribute | summary
attribute: fast-search
}
field title type string {
    indexing: index | summary
}
field description type string {
    indexing: index | summary
}
field category type string {
indexing: attribute | summary
attribute: fast-search
}
field price type double {
indexing: attribute | summary
}
// Vector field for semantic search
// This stores the AI embedding of the product description
field description_vector type tensor<float>(x[512]) {
    indexing: attribute | index
    attribute {
        distance-metric: euclidean
    }
    index {
        hnsw {
            max-links-per-node: 16
            neighbors-to-explore-at-insert: 200
        }
    }
}
// Another vector for title-based search
field title_vector type tensor<float>(x[512]) {
    indexing: attribute | index 
    attribute {
        distance-metric: euclidean
    }
    index {
        hnsw {
            max-links-per-node: 16
            neighbors-to-explore-at-insert: 200
        }
    }
}
}
// Text search configuration
fieldset default {
fields: title, description
}
// Rank profiles define how to score and rank search results
// Traditional text-based ranking
rank-profile text-search {
first-phase {
expression: bm25(title) + bm25(description)
}
}
// Vector-based semantic ranking  
rank-profile semantic-search {
    inputs {
        query(query_vector) tensor<float>(x[512])
    }
first-phase {
        expression: closeness(field: description_vector)
}
}
// Hybrid ranking combining text and vector
rank-profile hybrid-search {
    inputs {
        query(query_vector) tensor<float>(x[512])
    }
first-phase {
        expression: 0.7 * closeness(field: description_vector) + 0.3 * (bm25(title) + bm25(description))
}
}
}